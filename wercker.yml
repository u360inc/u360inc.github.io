box: michilu/deploy-gh-pages
build:
  steps:
    - bundle-install:
        binstubs: true
        jobs: 4
    - pip-install
    - script:
        name: build
        code: |-
          make
          cd assets && zip -r u360-logo.zip u360-logo
    - script:
        name: copy output
        code: |-
          rsync -avz --copy-unsafe-links $WERCKER_SOURCE_DIR/ $WERCKER_OUTPUT_DIR
deploy:
  steps:
    - script:
        name: copy .gitignore for gh-pages
        code: |-
          cp assets/.gitignore_gh-pages .gitignore
    # https://github.com/lvivier/step-gh-pages
    - lukevivier/gh-pages:
      domain: u360inc.com
      repo: u360inc/u360inc.github.io
      token: $GITHUB_TOKEN
  after-steps:
    - hipchat-notify:
        token: $HIPCHAT_TOKEN
        room-id: $HIPCHAT_ID
